{"version":3,"sources":["../../xml-http-request.ts","../node_modules/stream-http/lib/request.js","../node_modules/to-arraybuffer/index.js","../node_modules/builtin-status-codes/browser.js","../node_modules/os-browserify/browser.js","../../progress-event.ts","../../errors.ts","../../xml-http-request-upload.ts","../node_modules/cookiejar/cookiejar.js","../node_modules/stream-http/index.js","../../xml-http-request-event-target.ts","../../index.ts","../node_modules/stream-http/lib/capability.js","../node_modules/stream-http/lib/response.js","../node_modules/https-browserify/index.js"],"names":["XMLHttpRequest","capability","require","inherits","response","stream","toArrayBuffer","IncomingMessage","rStates","readyStates","ClientRequest","module","exports","opts","preferBinary","self","this","Writable","call","_opts","_body","_headers","auth","setHeader","Buffer","toString","Object","keys","headers","forEach","name","useFetch","mode","abortController","overrideMimeType","Error","_mode","fetch","mozchunkedarraybuffer","msstream","arraybuffer","vbArray","decideMode","_fetchTimer","on","_onFinish","prototype","value","lowerName","toLowerCase","unsafeHeaders","indexOf","getHeader","header","removeHeader","_destroyed","headersObj","body","method","concat","blobConstructor","global","Blob","map","buffer","type","headersList","keyName","Array","isArray","v","push","signal","controller","AbortController","_fetchAbortController","requestTimeout","setTimeout","emit","abort","url","undefined","credentials","withCredentials","then","_fetchResponse","_connect","reason","clearTimeout","xhr","_xhr","open","err","process","nextTick","responseType","split","timeout","ontimeout","setRequestHeader","_response","onreadystatechange","readyState","LOADING","DONE","_onXHRProgress","onprogress","onerror","send","status","e","statusValid","_write","chunk","encoding","cb","destroy","end","data","flushHeaders","setNoDelay","setSocketKeepAlive","buf","Uint8Array","byteOffset","byteLength","slice","isBuffer","arrayCopy","length","len","i","endianness","hostname","location","loadavg","uptime","freemem","Number","MAX_VALUE","totalmem","cpus","release","navigator","appVersion","networkInterfaces","getNetworkInterfaces","arch","platform","tmpdir","tmpDir","EOL","homedir","ProgressEvent","CookieAccessInfo","domain","path","secure","script","Cookie","cookiestr","request_domain","request_path","expiration_date","Infinity","String","explicit_path","explicit_domain","noscript","parse","All","freeze","create","str","Date","toGMTString","join","toValueString","cookie_str_splitter","CookieJar","cookies","cookies_list","setCookie","cookie","remove","now","collidesWith","splice","getCookie","cookie_name","access_info","matches","getCookies","c","parts","filter","pair","match","console","warn","key","trim","access_domain","replace","cookie_domain","wildcard","setCookies","successful","item","extend","statusCodes","http","request","defaultProtocol","protocol","search","host","port","toUpperCase","req","get","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","isFunction","ReadableStream","writableStream","WritableStream","ArrayBuffer","getXHR","XDomainRequest","checkTypeSupport","haveArrayBuffer","haveSlice","VBArray","UNSENT","OPENED","HEADERS_RECEIVED","fetchTimer","Readable","rawHeaders","trailers","rawTrailers","statusCode","statusMessage","statusText","writable","write","Promise","resolve","reject","_resumeFetch","close","pipeTo","catch","reader","getReader","read","result","done","_pos","responseURL","getAllResponseHeaders","_charset","mimeType","charsetMatch","_read","responseBody","toArray","responseText","newData","substr","charCodeAt","MSStreamReader","onload","readAsArrayBuffer","https","hasOwnProperty","validateParams","params"],"mappings":"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","file":"static/js/4.78abff8b.chunk.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar os = require(\"os\");\nvar url = require(\"url\");\nvar progress_event_1 = require(\"./progress-event\");\nvar errors_1 = require(\"./errors\");\nvar xml_http_request_event_target_1 = require(\"./xml-http-request-event-target\");\nvar xml_http_request_upload_1 = require(\"./xml-http-request-upload\");\nvar Cookie = require(\"cookiejar\");\nvar XMLHttpRequest = /** @class */ (function (_super) {\n    __extends(XMLHttpRequest, _super);\n    function XMLHttpRequest(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.UNSENT = XMLHttpRequest.UNSENT;\n        _this.OPENED = XMLHttpRequest.OPENED;\n        _this.HEADERS_RECEIVED = XMLHttpRequest.HEADERS_RECEIVED;\n        _this.LOADING = XMLHttpRequest.LOADING;\n        _this.DONE = XMLHttpRequest.DONE;\n        _this.onreadystatechange = null;\n        _this.readyState = XMLHttpRequest.UNSENT;\n        _this.response = null;\n        _this.responseText = '';\n        _this.responseType = '';\n        _this.status = 0; // TODO: UNSENT?\n        _this.statusText = '';\n        _this.timeout = 0;\n        _this.upload = new xml_http_request_upload_1.XMLHttpRequestUpload();\n        _this.responseUrl = '';\n        _this.withCredentials = false;\n        _this._method = null;\n        _this._url = null;\n        _this._sync = false;\n        _this._headers = {};\n        _this._loweredHeaders = {};\n        _this._mimeOverride = null; // TODO: is type right?\n        _this._request = null;\n        _this._response = null;\n        _this._responseParts = null;\n        _this._responseHeaders = null;\n        _this._aborting = null; // TODO: type?\n        _this._error = null; // TODO: type?\n        _this._loadedBytes = 0;\n        _this._totalBytes = 0;\n        _this._lengthComputable = false;\n        _this._restrictedMethods = { CONNECT: true, TRACE: true, TRACK: true };\n        _this._restrictedHeaders = {\n            'accept-charset': true,\n            'accept-encoding': true,\n            'access-control-request-headers': true,\n            'access-control-request-method': true,\n            connection: true,\n            'content-length': true,\n            cookie: true,\n            cookie2: true,\n            date: true,\n            dnt: true,\n            expect: true,\n            host: true,\n            'keep-alive': true,\n            origin: true,\n            referer: true,\n            te: true,\n            trailer: true,\n            'transfer-encoding': true,\n            upgrade: true,\n            'user-agent': true,\n            via: true\n        };\n        _this._privateHeaders = { 'set-cookie': true, 'set-cookie2': true };\n        _this._userAgent = \"Mozilla/5.0 (\" + os.type() + \" \" + os.arch() + \") node.js/\" + process.versions.node + \" v8/\" + process.versions.v8;\n        _this._anonymous = options.anon || false;\n        return _this;\n    }\n    XMLHttpRequest.prototype.open = function (method, url, async, user, password) {\n        if (async === void 0) { async = true; }\n        method = method.toUpperCase();\n        if (this._restrictedMethods[method]) {\n            throw new XMLHttpRequest.SecurityError(\"HTTP method \" + method + \" is not allowed in XHR\");\n        }\n        ;\n        var xhrUrl = this._parseUrl(url, user, password);\n        if (this.readyState === XMLHttpRequest.HEADERS_RECEIVED || this.readyState === XMLHttpRequest.LOADING) {\n            // TODO(pwnall): terminate abort(), terminate send()\n        }\n        this._method = method;\n        this._url = xhrUrl;\n        this._sync = !async;\n        this._headers = {};\n        this._loweredHeaders = {};\n        this._mimeOverride = null;\n        this._setReadyState(XMLHttpRequest.OPENED);\n        this._request = null;\n        this._response = null;\n        this.status = 0;\n        this.statusText = '';\n        this._responseParts = [];\n        this._responseHeaders = null;\n        this._loadedBytes = 0;\n        this._totalBytes = 0;\n        this._lengthComputable = false;\n    };\n    XMLHttpRequest.prototype.setRequestHeader = function (name, value) {\n        if (this.readyState !== XMLHttpRequest.OPENED) {\n            throw new XMLHttpRequest.InvalidStateError('XHR readyState must be OPENED');\n        }\n        var loweredName = name.toLowerCase();\n        if (this._restrictedHeaders[loweredName] || /^sec-/.test(loweredName) || /^proxy-/.test(loweredName)) {\n            console.warn(\"Refused to set unsafe header \\\"\" + name + \"\\\"\");\n            return;\n        }\n        value = value.toString();\n        if (this._loweredHeaders[loweredName] != null) {\n            name = this._loweredHeaders[loweredName];\n            this._headers[name] = this._headers[name] + \", \" + value;\n        }\n        else {\n            this._loweredHeaders[loweredName] = name;\n            this._headers[name] = value;\n        }\n    };\n    XMLHttpRequest.prototype.send = function (data) {\n        if (this.readyState !== XMLHttpRequest.OPENED) {\n            throw new XMLHttpRequest.InvalidStateError('XHR readyState must be OPENED');\n        }\n        if (this._request) {\n            throw new XMLHttpRequest.InvalidStateError('send() already called');\n        }\n        switch (this._url.protocol) {\n            case 'file:':\n                return this._sendFile(data);\n            case 'http:':\n            case 'https:':\n                return this._sendHttp(data);\n            default:\n                throw new XMLHttpRequest.NetworkError(\"Unsupported protocol \" + this._url.protocol);\n        }\n    };\n    XMLHttpRequest.prototype.abort = function () {\n        if (this._request == null) {\n            return;\n        }\n        this._request.abort();\n        this._setError();\n        this._dispatchProgress('abort');\n        this._dispatchProgress('loadend');\n    };\n    XMLHttpRequest.prototype.getResponseHeader = function (name) {\n        if (this._responseHeaders == null || name == null) {\n            return null;\n        }\n        var loweredName = name.toLowerCase();\n        return this._responseHeaders.hasOwnProperty(loweredName)\n            ? this._responseHeaders[name.toLowerCase()]\n            : null;\n    };\n    XMLHttpRequest.prototype.getAllResponseHeaders = function () {\n        var _this = this;\n        if (this._responseHeaders == null) {\n            return '';\n        }\n        return Object.keys(this._responseHeaders).map(function (key) { return key + \": \" + _this._responseHeaders[key]; }).join('\\r\\n');\n    };\n    XMLHttpRequest.prototype.overrideMimeType = function (mimeType) {\n        if (this.readyState === XMLHttpRequest.LOADING || this.readyState === XMLHttpRequest.DONE) {\n            throw new XMLHttpRequest.InvalidStateError('overrideMimeType() not allowed in LOADING or DONE');\n        }\n        this._mimeOverride = mimeType.toLowerCase();\n    };\n    XMLHttpRequest.prototype.nodejsSet = function (options) {\n        this.nodejsHttpAgent = options.httpAgent || this.nodejsHttpAgent;\n        this.nodejsHttpsAgent = options.httpsAgent || this.nodejsHttpsAgent;\n        if (options.hasOwnProperty('baseUrl')) {\n            if (options.baseUrl != null) {\n                var parsedUrl = url.parse(options.baseUrl, false, true);\n                if (!parsedUrl.protocol) {\n                    throw new XMLHttpRequest.SyntaxError(\"baseUrl must be an absolute URL\");\n                }\n            }\n            this.nodejsBaseUrl = options.baseUrl;\n        }\n    };\n    XMLHttpRequest.nodejsSet = function (options) {\n        XMLHttpRequest.prototype.nodejsSet(options);\n    };\n    XMLHttpRequest.prototype._setReadyState = function (readyState) {\n        this.readyState = readyState;\n        this.dispatchEvent(new progress_event_1.ProgressEvent('readystatechange'));\n    };\n    XMLHttpRequest.prototype._sendFile = function (data) {\n        // TODO\n        throw new Error('Protocol file: not implemented');\n    };\n    XMLHttpRequest.prototype._sendHttp = function (data) {\n        if (this._sync) {\n            throw new Error('Synchronous XHR processing not implemented');\n        }\n        if (data && (this._method === 'GET' || this._method === 'HEAD')) {\n            console.warn(\"Discarding entity body for \" + this._method + \" requests\");\n            data = null;\n        }\n        else {\n            data = data || '';\n        }\n        this.upload._setData(data);\n        this._finalizeHeaders();\n        this._sendHxxpRequest();\n    };\n    XMLHttpRequest.prototype._sendHxxpRequest = function () {\n        var _this = this;\n        if (this.withCredentials) {\n            var cookie = XMLHttpRequest.cookieJar\n                .getCookies(Cookie.CookieAccessInfo(this._url.hostname, this._url.pathname, this._url.protocol === 'https:')).toValueString();\n            this._headers.cookie = this._headers.cookie2 = cookie;\n        }\n        var _a = this._url.protocol === 'http:' ? [http, this.nodejsHttpAgent] : [https, this.nodejsHttpsAgent], hxxp = _a[0], agent = _a[1];\n        var requestMethod = hxxp.request.bind(hxxp);\n        var request = requestMethod({\n            hostname: this._url.hostname,\n            port: +this._url.port,\n            path: this._url.path,\n            auth: this._url.auth,\n            method: this._method,\n            headers: this._headers,\n            agent: agent\n        });\n        this._request = request;\n        if (this.timeout) {\n            request.setTimeout(this.timeout, function () { return _this._onHttpTimeout(request); });\n        }\n        request.on('response', function (response) { return _this._onHttpResponse(request, response); });\n        request.on('error', function (error) { return _this._onHttpRequestError(request, error); });\n        this.upload._startUpload(request);\n        if (this._request === request) {\n            this._dispatchProgress('loadstart');\n        }\n    };\n    XMLHttpRequest.prototype._finalizeHeaders = function () {\n        this._headers = __assign({}, this._headers, { Connection: 'keep-alive', Host: this._url.host, 'User-Agent': this._userAgent }, this._anonymous ? { Referer: 'about:blank' } : {});\n        this.upload._finalizeHeaders(this._headers, this._loweredHeaders);\n    };\n    XMLHttpRequest.prototype._onHttpResponse = function (request, response) {\n        var _this = this;\n        if (this._request !== request) {\n            return;\n        }\n        if (this.withCredentials && (response.headers['set-cookie'] || response.headers['set-cookie2'])) {\n            XMLHttpRequest.cookieJar\n                .setCookies(response.headers['set-cookie'] || response.headers['set-cookie2']);\n        }\n        if ([301, 302, 303, 307, 308].indexOf(response.statusCode) >= 0) {\n            this._url = this._parseUrl(response.headers.location);\n            this._method = 'GET';\n            if (this._loweredHeaders['content-type']) {\n                delete this._headers[this._loweredHeaders['content-type']];\n                delete this._loweredHeaders['content-type'];\n            }\n            if (this._headers['Content-Type'] != null) {\n                delete this._headers['Content-Type'];\n            }\n            delete this._headers['Content-Length'];\n            this.upload._reset();\n            this._finalizeHeaders();\n            this._sendHxxpRequest();\n            return;\n        }\n        this._response = response;\n        this._response.on('data', function (data) { return _this._onHttpResponseData(response, data); });\n        this._response.on('end', function () { return _this._onHttpResponseEnd(response); });\n        this._response.on('close', function () { return _this._onHttpResponseClose(response); });\n        this.responseUrl = this._url.href.split('#')[0];\n        this.status = response.statusCode;\n        this.statusText = http.STATUS_CODES[this.status];\n        this._parseResponseHeaders(response);\n        var lengthString = this._responseHeaders['content-length'] || '';\n        this._totalBytes = +lengthString;\n        this._lengthComputable = !!lengthString;\n        this._setReadyState(XMLHttpRequest.HEADERS_RECEIVED);\n    };\n    XMLHttpRequest.prototype._onHttpResponseData = function (response, data) {\n        if (this._response !== response) {\n            return;\n        }\n        this._responseParts.push(new Buffer(data));\n        this._loadedBytes += data.length;\n        if (this.readyState !== XMLHttpRequest.LOADING) {\n            this._setReadyState(XMLHttpRequest.LOADING);\n        }\n        this._dispatchProgress('progress');\n    };\n    XMLHttpRequest.prototype._onHttpResponseEnd = function (response) {\n        if (this._response !== response) {\n            return;\n        }\n        this._parseResponse();\n        this._request = null;\n        this._response = null;\n        this._setReadyState(XMLHttpRequest.DONE);\n        this._dispatchProgress('load');\n        this._dispatchProgress('loadend');\n    };\n    XMLHttpRequest.prototype._onHttpResponseClose = function (response) {\n        if (this._response !== response) {\n            return;\n        }\n        var request = this._request;\n        this._setError();\n        request.abort();\n        this._setReadyState(XMLHttpRequest.DONE);\n        this._dispatchProgress('error');\n        this._dispatchProgress('loadend');\n    };\n    XMLHttpRequest.prototype._onHttpTimeout = function (request) {\n        if (this._request !== request) {\n            return;\n        }\n        this._setError();\n        request.abort();\n        this._setReadyState(XMLHttpRequest.DONE);\n        this._dispatchProgress('timeout');\n        this._dispatchProgress('loadend');\n    };\n    XMLHttpRequest.prototype._onHttpRequestError = function (request, error) {\n        if (this._request !== request) {\n            return;\n        }\n        this._setError();\n        request.abort();\n        this._setReadyState(XMLHttpRequest.DONE);\n        this._dispatchProgress('error');\n        this._dispatchProgress('loadend');\n    };\n    XMLHttpRequest.prototype._dispatchProgress = function (eventType) {\n        var event = new XMLHttpRequest.ProgressEvent(eventType);\n        event.lengthComputable = this._lengthComputable;\n        event.loaded = this._loadedBytes;\n        event.total = this._totalBytes;\n        this.dispatchEvent(event);\n    };\n    XMLHttpRequest.prototype._setError = function () {\n        this._request = null;\n        this._response = null;\n        this._responseHeaders = null;\n        this._responseParts = null;\n    };\n    XMLHttpRequest.prototype._parseUrl = function (urlString, user, password) {\n        var absoluteUrl = this.nodejsBaseUrl == null ? urlString : url.resolve(this.nodejsBaseUrl, urlString);\n        var xhrUrl = url.parse(absoluteUrl, false, true);\n        xhrUrl.hash = null;\n        var _a = (xhrUrl.auth || '').split(':'), xhrUser = _a[0], xhrPassword = _a[1];\n        if (xhrUser || xhrPassword || user || password) {\n            xhrUrl.auth = (user || xhrUser || '') + \":\" + (password || xhrPassword || '');\n        }\n        return xhrUrl;\n    };\n    XMLHttpRequest.prototype._parseResponseHeaders = function (response) {\n        this._responseHeaders = {};\n        for (var name_1 in response.headers) {\n            var loweredName = name_1.toLowerCase();\n            if (this._privateHeaders[loweredName]) {\n                continue;\n            }\n            this._responseHeaders[loweredName] = response.headers[name_1];\n        }\n        if (this._mimeOverride != null) {\n            this._responseHeaders['content-type'] = this._mimeOverride;\n        }\n    };\n    XMLHttpRequest.prototype._parseResponse = function () {\n        var buffer = Buffer.concat(this._responseParts);\n        this._responseParts = null;\n        switch (this.responseType) {\n            case 'json':\n                this.responseText = null;\n                try {\n                    this.response = JSON.parse(buffer.toString('utf-8'));\n                }\n                catch (_a) {\n                    this.response = null;\n                }\n                return;\n            case 'buffer':\n                this.responseText = null;\n                this.response = buffer;\n                return;\n            case 'arraybuffer':\n                this.responseText = null;\n                var arrayBuffer = new ArrayBuffer(buffer.length);\n                var view = new Uint8Array(arrayBuffer);\n                for (var i = 0; i < buffer.length; i++) {\n                    view[i] = buffer[i];\n                }\n                this.response = arrayBuffer;\n                return;\n            case 'text':\n            default:\n                try {\n                    this.responseText = buffer.toString(this._parseResponseEncoding());\n                }\n                catch (_b) {\n                    this.responseText = buffer.toString('binary');\n                }\n                this.response = this.responseText;\n        }\n    };\n    XMLHttpRequest.prototype._parseResponseEncoding = function () {\n        return /;\\s*charset=(.*)$/.exec(this._responseHeaders['content-type'] || '')[1] || 'utf-8';\n    };\n    XMLHttpRequest.ProgressEvent = progress_event_1.ProgressEvent;\n    XMLHttpRequest.InvalidStateError = errors_1.InvalidStateError;\n    XMLHttpRequest.NetworkError = errors_1.NetworkError;\n    XMLHttpRequest.SecurityError = errors_1.SecurityError;\n    XMLHttpRequest.SyntaxError = errors_1.SyntaxError;\n    XMLHttpRequest.XMLHttpRequestUpload = xml_http_request_upload_1.XMLHttpRequestUpload;\n    XMLHttpRequest.UNSENT = 0;\n    XMLHttpRequest.OPENED = 1;\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\n    XMLHttpRequest.LOADING = 3;\n    XMLHttpRequest.DONE = 4;\n    XMLHttpRequest.cookieJar = Cookie.CookieJar();\n    return XMLHttpRequest;\n}(xml_http_request_event_target_1.XMLHttpRequestEventTarget));\nexports.XMLHttpRequest = XMLHttpRequest;\nXMLHttpRequest.prototype.nodejsHttpAgent = http.globalAgent;\nXMLHttpRequest.prototype.nodejsHttpsAgent = https.globalAgent;\nXMLHttpRequest.prototype.nodejsBaseUrl = null;\n//# sourceMappingURL=xml-http-request.js.map","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProgressEvent = /** @class */ (function () {\n    function ProgressEvent(type) {\n        this.type = type;\n        this.bubbles = false;\n        this.cancelable = false;\n        this.loaded = 0;\n        this.lengthComputable = false;\n        this.total = 0;\n    }\n    return ProgressEvent;\n}());\nexports.ProgressEvent = ProgressEvent;\n//# sourceMappingURL=progress-event.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SecurityError = /** @class */ (function (_super) {\n    __extends(SecurityError, _super);\n    function SecurityError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SecurityError;\n}(Error));\nexports.SecurityError = SecurityError;\nvar InvalidStateError = /** @class */ (function (_super) {\n    __extends(InvalidStateError, _super);\n    function InvalidStateError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return InvalidStateError;\n}(Error));\nexports.InvalidStateError = InvalidStateError;\nvar NetworkError = /** @class */ (function (_super) {\n    __extends(NetworkError, _super);\n    function NetworkError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return NetworkError;\n}(Error));\nexports.NetworkError = NetworkError;\nvar SyntaxError = /** @class */ (function (_super) {\n    __extends(SyntaxError, _super);\n    function SyntaxError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SyntaxError;\n}(Error));\nexports.SyntaxError = SyntaxError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xml_http_request_event_target_1 = require(\"./xml-http-request-event-target\");\nvar XMLHttpRequestUpload = /** @class */ (function (_super) {\n    __extends(XMLHttpRequestUpload, _super);\n    function XMLHttpRequestUpload() {\n        var _this = _super.call(this) || this;\n        _this._contentType = null;\n        _this._body = null;\n        _this._reset();\n        return _this;\n    }\n    XMLHttpRequestUpload.prototype._reset = function () {\n        this._contentType = null;\n        this._body = null;\n    };\n    XMLHttpRequestUpload.prototype._setData = function (data) {\n        if (data == null) {\n            return;\n        }\n        if (typeof data === 'string') {\n            if (data.length !== 0) {\n                this._contentType = 'text/plain;charset=UTF-8';\n            }\n            this._body = new Buffer(data, 'utf-8');\n        }\n        else if (Buffer.isBuffer(data)) {\n            this._body = data;\n        }\n        else if (data instanceof ArrayBuffer) {\n            var body = new Buffer(data.byteLength);\n            var view = new Uint8Array(data);\n            for (var i = 0; i < data.byteLength; i++) {\n                body[i] = view[i];\n            }\n            this._body = body;\n        }\n        else if (data.buffer && data.buffer instanceof ArrayBuffer) {\n            var body = new Buffer(data.byteLength);\n            var offset = data.byteOffset;\n            var view = new Uint8Array(data.buffer);\n            for (var i = 0; i < data.byteLength; i++) {\n                body[i] = view[i + offset];\n            }\n            this._body = body;\n        }\n        else {\n            throw new Error(\"Unsupported send() data \" + data);\n        }\n    };\n    XMLHttpRequestUpload.prototype._finalizeHeaders = function (headers, loweredHeaders) {\n        if (this._contentType && !loweredHeaders['content-type']) {\n            headers['Content-Type'] = this._contentType;\n        }\n        if (this._body) {\n            headers['Content-Length'] = this._body.length.toString();\n        }\n    };\n    XMLHttpRequestUpload.prototype._startUpload = function (request) {\n        if (this._body) {\n            request.write(this._body);\n        }\n        request.end();\n    };\n    return XMLHttpRequestUpload;\n}(xml_http_request_event_target_1.XMLHttpRequestEventTarget));\nexports.XMLHttpRequestUpload = XMLHttpRequestUpload;\n//# sourceMappingURL=xml-http-request-upload.js.map","/* jshint node: true */\n(function () {\n    \"use strict\";\n\n    function CookieAccessInfo(domain, path, secure, script) {\n        if (this instanceof CookieAccessInfo) {\n            this.domain = domain || undefined;\n            this.path = path || \"/\";\n            this.secure = !!secure;\n            this.script = !!script;\n            return this;\n        }\n        return new CookieAccessInfo(domain, path, secure, script);\n    }\n    CookieAccessInfo.All = Object.freeze(Object.create(null));\n    exports.CookieAccessInfo = CookieAccessInfo;\n\n    function Cookie(cookiestr, request_domain, request_path) {\n        if (cookiestr instanceof Cookie) {\n            return cookiestr;\n        }\n        if (this instanceof Cookie) {\n            this.name = null;\n            this.value = null;\n            this.expiration_date = Infinity;\n            this.path = String(request_path || \"/\");\n            this.explicit_path = false;\n            this.domain = request_domain || null;\n            this.explicit_domain = false;\n            this.secure = false; //how to define default?\n            this.noscript = false; //httponly\n            if (cookiestr) {\n                this.parse(cookiestr, request_domain, request_path);\n            }\n            return this;\n        }\n        return new Cookie(cookiestr, request_domain, request_path);\n    }\n    exports.Cookie = Cookie;\n\n    Cookie.prototype.toString = function toString() {\n        var str = [this.name + \"=\" + this.value];\n        if (this.expiration_date !== Infinity) {\n            str.push(\"expires=\" + (new Date(this.expiration_date)).toGMTString());\n        }\n        if (this.domain) {\n            str.push(\"domain=\" + this.domain);\n        }\n        if (this.path) {\n            str.push(\"path=\" + this.path);\n        }\n        if (this.secure) {\n            str.push(\"secure\");\n        }\n        if (this.noscript) {\n            str.push(\"httponly\");\n        }\n        return str.join(\"; \");\n    };\n\n    Cookie.prototype.toValueString = function toValueString() {\n        return this.name + \"=\" + this.value;\n    };\n\n    var cookie_str_splitter = /[:](?=\\s*[a-zA-Z0-9_\\-]+\\s*[=])/g;\n    Cookie.prototype.parse = function parse(str, request_domain, request_path) {\n        if (this instanceof Cookie) {\n            var parts = str.split(\";\").filter(function (value) {\n                    return !!value;\n                });\n            var i;\n\n            var pair = parts[0].match(/([^=]+)=([\\s\\S]*)/);\n            if (!pair) {\n                console.warn(\"Invalid cookie header encountered. Header: '\"+str+\"'\");\n                return;\n            }\n\n            var key = pair[1];\n            var value = pair[2];\n            if ( typeof key !== 'string' || key.length === 0 || typeof value !== 'string' ) {\n                console.warn(\"Unable to extract values from cookie header. Cookie: '\"+str+\"'\");\n                return;\n            }\n\n            this.name = key;\n            this.value = value;\n\n            for (i = 1; i < parts.length; i += 1) {\n                pair = parts[i].match(/([^=]+)(?:=([\\s\\S]*))?/);\n                key = pair[1].trim().toLowerCase();\n                value = pair[2];\n                switch (key) {\n                case \"httponly\":\n                    this.noscript = true;\n                    break;\n                case \"expires\":\n                    this.expiration_date = value ?\n                            Number(Date.parse(value)) :\n                            Infinity;\n                    break;\n                case \"path\":\n                    this.path = value ?\n                            value.trim() :\n                            \"\";\n                    this.explicit_path = true;\n                    break;\n                case \"domain\":\n                    this.domain = value ?\n                            value.trim() :\n                            \"\";\n                    this.explicit_domain = !!this.domain;\n                    break;\n                case \"secure\":\n                    this.secure = true;\n                    break;\n                }\n            }\n\n            if (!this.explicit_path) {\n               this.path = request_path || \"/\";\n            }\n            if (!this.explicit_domain) {\n               this.domain = request_domain;\n            }\n\n            return this;\n        }\n        return new Cookie().parse(str, request_domain, request_path);\n    };\n\n    Cookie.prototype.matches = function matches(access_info) {\n        if (access_info === CookieAccessInfo.All) {\n          return true;\n        }\n        if (this.noscript && access_info.script ||\n                this.secure && !access_info.secure ||\n                !this.collidesWith(access_info)) {\n            return false;\n        }\n        return true;\n    };\n\n    Cookie.prototype.collidesWith = function collidesWith(access_info) {\n        if ((this.path && !access_info.path) || (this.domain && !access_info.domain)) {\n            return false;\n        }\n        if (this.path && access_info.path.indexOf(this.path) !== 0) {\n            return false;\n        }\n        if (this.explicit_path && access_info.path.indexOf( this.path ) !== 0) {\n           return false;\n        }\n        var access_domain = access_info.domain && access_info.domain.replace(/^[\\.]/,'');\n        var cookie_domain = this.domain && this.domain.replace(/^[\\.]/,'');\n        if (cookie_domain === access_domain) {\n            return true;\n        }\n        if (cookie_domain) {\n            if (!this.explicit_domain) {\n                return false; // we already checked if the domains were exactly the same\n            }\n            var wildcard = access_domain.indexOf(cookie_domain);\n            if (wildcard === -1 || wildcard !== access_domain.length - cookie_domain.length) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    };\n\n    function CookieJar() {\n        var cookies, cookies_list, collidable_cookie;\n        if (this instanceof CookieJar) {\n            cookies = Object.create(null); //name: [Cookie]\n\n            this.setCookie = function setCookie(cookie, request_domain, request_path) {\n                var remove, i;\n                cookie = new Cookie(cookie, request_domain, request_path);\n                //Delete the cookie if the set is past the current time\n                remove = cookie.expiration_date <= Date.now();\n                if (cookies[cookie.name] !== undefined) {\n                    cookies_list = cookies[cookie.name];\n                    for (i = 0; i < cookies_list.length; i += 1) {\n                        collidable_cookie = cookies_list[i];\n                        if (collidable_cookie.collidesWith(cookie)) {\n                            if (remove) {\n                                cookies_list.splice(i, 1);\n                                if (cookies_list.length === 0) {\n                                    delete cookies[cookie.name];\n                                }\n                                return false;\n                            }\n                            cookies_list[i] = cookie;\n                            return cookie;\n                        }\n                    }\n                    if (remove) {\n                        return false;\n                    }\n                    cookies_list.push(cookie);\n                    return cookie;\n                }\n                if (remove) {\n                    return false;\n                }\n                cookies[cookie.name] = [cookie];\n                return cookies[cookie.name];\n            };\n            //returns a cookie\n            this.getCookie = function getCookie(cookie_name, access_info) {\n                var cookie, i;\n                cookies_list = cookies[cookie_name];\n                if (!cookies_list) {\n                    return;\n                }\n                for (i = 0; i < cookies_list.length; i += 1) {\n                    cookie = cookies_list[i];\n                    if (cookie.expiration_date <= Date.now()) {\n                        if (cookies_list.length === 0) {\n                            delete cookies[cookie.name];\n                        }\n                        continue;\n                    }\n\n                    if (cookie.matches(access_info)) {\n                        return cookie;\n                    }\n                }\n            };\n            //returns a list of cookies\n            this.getCookies = function getCookies(access_info) {\n                var matches = [], cookie_name, cookie;\n                for (cookie_name in cookies) {\n                    cookie = this.getCookie(cookie_name, access_info);\n                    if (cookie) {\n                        matches.push(cookie);\n                    }\n                }\n                matches.toString = function toString() {\n                    return matches.join(\":\");\n                };\n                matches.toValueString = function toValueString() {\n                    return matches.map(function (c) {\n                        return c.toValueString();\n                    }).join('; ');\n                };\n                return matches;\n            };\n\n            return this;\n        }\n        return new CookieJar();\n    }\n    exports.CookieJar = CookieJar;\n\n    //returns list of cookies that were set correctly. Cookies that are expired and removed are not returned.\n    CookieJar.prototype.setCookies = function setCookies(cookies, request_domain, request_path) {\n        cookies = Array.isArray(cookies) ?\n                cookies :\n                cookies.split(cookie_str_splitter);\n        var successful = [],\n            i,\n            cookie;\n        cookies = cookies.map(function(item){\n            return new Cookie(item, request_domain, request_path);\n        });\n        for (i = 0; i < cookies.length; i += 1) {\n            cookie = cookies[i];\n            if (this.setCookie(cookie, request_domain, request_path)) {\n                successful.push(cookie);\n            }\n        }\n        return successful;\n    };\n}());\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar XMLHttpRequestEventTarget = /** @class */ (function () {\n    function XMLHttpRequestEventTarget() {\n        this.listeners = {};\n    }\n    XMLHttpRequestEventTarget.prototype.addEventListener = function (eventType, listener) {\n        eventType = eventType.toLowerCase();\n        this.listeners[eventType] = this.listeners[eventType] || [];\n        this.listeners[eventType].push(listener.handleEvent || listener);\n    };\n    XMLHttpRequestEventTarget.prototype.removeEventListener = function (eventType, listener) {\n        eventType = eventType.toLowerCase();\n        if (!this.listeners[eventType]) {\n            return;\n        }\n        var index = this.listeners[eventType].indexOf(listener.handleEvent || listener);\n        if (index < 0) {\n            return;\n        }\n        this.listeners[eventType].splice(index, 1);\n    };\n    XMLHttpRequestEventTarget.prototype.dispatchEvent = function (event) {\n        var eventType = event.type.toLowerCase();\n        event.target = this; // TODO: set event.currentTarget?\n        if (this.listeners[eventType]) {\n            for (var _i = 0, _a = this.listeners[eventType]; _i < _a.length; _i++) {\n                var listener_1 = _a[_i];\n                listener_1.call(this, event);\n            }\n        }\n        var listener = this[\"on\" + eventType];\n        if (listener) {\n            listener.call(this, event);\n        }\n        return true;\n    };\n    return XMLHttpRequestEventTarget;\n}());\nexports.XMLHttpRequestEventTarget = XMLHttpRequestEventTarget;\n//# sourceMappingURL=xml-http-request-event-target.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./xml-http-request\"));\nvar xml_http_request_event_target_1 = require(\"./xml-http-request-event-target\");\nexports.XMLHttpRequestEventTarget = xml_http_request_event_target_1.XMLHttpRequestEventTarget;\n//# sourceMappingURL=index.js.map","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n"],"sourceRoot":""}